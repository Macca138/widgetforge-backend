<!DOCTYPE html>
<html>
<head>
  <title>WidgetForge: Ticker Builder</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 600px; margin: auto; background: #f4f4f4; }
    label { display: block; margin-top: 1em; }
    input, select { width: 100%; padding: 8px; }
    .preview-box { border: 1px solid #ccc; padding: 10px; margin-top: 2em; background: white; }
    .iframe-box { background: #eef; padding: 10px; margin-top: 1em; }
  </style>
</head>
<body>
  <h1>üéõÔ∏è Build Your Live Ticker Widget</h1>

  <form id="configForm">
    <label>Symbols (comma-separated)</label>
    <input type="text" id="symbols" value="EURUSD,XAUUSD,NAS100">

    <label>Font</label>
    <select id="font">
      <option>Arial</option>
      <option>Roboto</option>
      <option>Inter</option>
      <option>Courier New</option>
    </select>

    <label>Font Size (px)</label>
    <input type="number" id="fontSize" value="16">

    <label>Font Color</label>
    <input type="color" id="fontColor" value="#ffffff">

    <label>Background Color</label>
    <input type="color" id="bgColor" value="#000000">

    <label>Scroll Speed (ms per frame)</label>
    <input type="number" id="scrollSpeed" value="30">

    <label>Static Text (Optional)</label>
    <input type="text" id="staticText" placeholder="e.g. Best spreads in the prop space">

    <button type="submit" style="margin-top:2em;">Generate Widget</button>
  </form>

  <div class="preview-box" id="previewBox" style="display:none;">
    <h3>üîó Your Embed Code</h3>
    <div class="iframe-box">
      <code id="iframeCode"></code>
    </div>
    <h3>üëÄ Live Preview</h3>
    <iframe id="previewFrame" width="100%" height="60" style="border:none;"></iframe>
  </div>

  <script>
    document.getElementById('configForm').onsubmit = function(e) {
      e.preventDefault();
      const symbols = document.getElementById('symbols').value;
      const font = document.getElementById('font').value;
      const fontSize = document.getElementById('fontSize').value;
      const fontColor = document.getElementById('fontColor').value;
      const bgColor = document.getElementById('bgColor').value;
      const scrollSpeed = document.getElementById('scrollSpeed').value;
      const staticText = document.getElementById('staticText').value;

      const params = new URLSearchParams({
        symbols, font, fontSize, fontColor, bgColor, scrollSpeed, staticText
      });

      const url = `http://62.171.135.138:8000/widgets/ticker?${params.toString()}`;
      document.getElementById('iframeCode').textContent = `<iframe src="${url}" width="100%" height="60" frameborder="0"></iframe>`;
      document.getElementById('previewFrame').src = url;
      document.getElementById('previewBox').style.display = 'block';
    };
  </script>
</body>
</html>
